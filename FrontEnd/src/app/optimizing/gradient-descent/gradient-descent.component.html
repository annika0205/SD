<app-template-sorting 
  [description]="'Test'" 
  [predefinedText]="predefinedTexts" 
  [action_button]="'Optimieren'"
  [maxInputs]="9"
  (sortClicked)="onClick()" 
  (inputsEvent)="onInputCountChanged($event)"
  (addInputClicked)="onAddInput($event)"
  (removeInputClicked)="onRemoveInput($event)">
  <div style="display: flex; flex-direction: column; height: 50vh; width: 100%">
    <!-- Controls row with flex -->
    <div class="balken" style="display: flex; justify-content: center; align-items: center; gap: 20px; margin: 10px; margin-bottom: 30px;">
      <div class="btn-group" role="group" aria-label="Basic radio toggle button group" style="height: 38px;">
        <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked (change)="setGraphMode('1D')" [checked]="graphMode === '1D'">
        <label class="btn" [ngClass]="graphMode === '1D' ? 'btn-outline-primary' : ''" for="btnradio1" 
          [style.background-color]="graphMode === '1D' ? '' : 'white'"
          [style.color]="graphMode === '1D' ? '' : 'black'"
          [style.border-color]="graphMode === '1D' ? '' : '#ced4da'">1D Graph</label>
    
        <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off" (change)="setGraphMode('2D')" [checked]="graphMode === '2D'">
        <label class="btn" [ngClass]="graphMode === '2D' ? 'btn-outline-primary' : ''" for="btnradio2" 
          [style.background-color]="graphMode === '2D' ? '' : 'white'"
          [style.color]="graphMode === '2D' ? '' : 'black'"
          [style.border-color]="graphMode === '2D' ? '' : '#ced4da'">2D Graph</label>
      </div>

      <div class="input-group" style="width: 250px;">
        <span class="input-group-text" style="width: 100px;">Schrittweite</span>
        <input 
          type="number" 
          class="form-control"
          style="min-width: 50px;"
          placeholder="0.001" 
          name="alpha"
          [(ngModel)]="alpha"
          (ngModelChange)="validateAlpha()"
          min="0" max="1" step="0.01">
        <span class="input-group-text" title="Bitte einen Wert zwischen 0 und 1 eingeben.">ℹ️</span>
      </div>

      <div class="input-group" style="width: 250px;">
        <span class="input-group-text" style="width: 200;">Maximale Schrittanzahl</span>
        <input 
          type="number" 
          class="form-control"
          style="min-width: 50px;"
          placeholder="20" 
          name="steps"
          [(ngModel)]="steps"
          min="1" max="50" step="1">
        
      </div>

      <div class="input-group" style="width: 300px;">
        <span class="input-group-text" style="width: 150px;">Abbruchkriterium</span>
        <input 
          type="number" 
          class="form-control"
          style="min-width: 50px;"
          placeholder="0.001" 
          name="termination"
          [(ngModel)]="termination"
          min="0" max="1" step="0.01">
        <span class="input-group-text" title="Wenn ||∇f|| diesen Wert unterschreitet ist die Optimierung beendet">ℹ️</span>
      </div>

      <div class="input-group" style="width: 250px;">
        <span class="input-group-text" style="width: 150;" *ngIf="graphMode === '1D'">Startwert</span>
        <span class="input-group-text" style="width: 150;" *ngIf="graphMode === '2D'">Startwert X</span>
        <input 
          type="number" 
          class="form-control"
          style="min-width: 50px;"
          placeholder="-3" 
          name="startX"
          [(ngModel)]="startX"
          min="-10" max="10" step="0.1">
      </div>

      <div class="input-group" style="width: 250px;" *ngIf="graphMode === '2D'">
        <span class="input-group-text" style="width: 150;">Startwert Y</span>
        <input 
          type="number" 
          class="form-control"
          style="min-width: 50px;"
          placeholder="-3" 
          name="startY"
          [(ngModel)]="startY"
          min="-10" max="10" step="0.1">
      </div>

      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" (change)="toggleMode($event)">
        <label class="form-check-label" for="flexSwitchCheckDefault" style="color: white; font-family: 'Inter', sans-serif;">Line Search</label>
      </div>
      
    </div>
    <div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
      <!-- 1D case -->
      <ng-container *ngIf="graphMode === '1D'">
        <p style="margin: 0;">Gefundener Punkt: {{ foundPoint !== null ? foundPoint.toFixed(4) : '-' }}</p>
        <p style="margin: 0;">Gradient am Punkt: {{ gradientAtPoint !== null ? gradientAtPoint.toFixed(4) : '-' }}</p>
      </ng-container>
      
      <!-- 2D case -->
      <ng-container *ngIf="graphMode === '2D'">
        <p style="margin: 0;">Gefundener Punkt: {{ foundPoint2D !== null ? '(' + foundPoint2D.x.toFixed(4) + ', ' + foundPoint2D.y.toFixed(4) + ')' : '-' }}</p>
        <p style="margin: 0;">Gradient am Punkt: {{ gradientAtPoint2D !== null ? '(' + gradientAtPoint2D.x.toFixed(4) + ', ' + gradientAtPoint2D.y.toFixed(4) + ')' : '-' }}</p>
      </ng-container>
      
      <p style="margin: 0;" *ngIf="useLineSearch">Gefundenes Alpha: {{ foundAlpha !== null ? foundAlpha.toFixed(4) : '-' }}</p>
      <p *ngIf="errorMessage" class="text-danger" style="margin: 0;">{{ errorMessage }}</p>
    </div>
    <!-- Graph container -->
    <div style="flex-grow: 1; display: flex; justify-content: center; align-items: center; height: 50vh; margin-top: 20px;">
      <div id="plot3d" style="height: 50vh; width: 80%;" *ngIf="graphMode === '2D'"></div>
      <canvas id="myChart" *ngIf="graphMode === '1D'" style="height: 50vh; width: 80%;"></canvas>
    </div>
  </div>
</app-template-sorting>

